{% extends 'index.twig' %}

{% block body %}
    <div id="svg">
        {{ svg|raw }}
    </div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script src="/assets/js/svg-pan-zoom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            var callgraph = svgPanZoom('#svg svg', {
                controlIconsEnabled: true,
                zoomScaleSensitivity: 0.03,
                minZoom: 0.9,
                onZoom: function(zoom) {
                    if(zoom<1) {
                        callgraph.center();
                    }
                    return zoom;
                }
            });

            $(window).resize(function () {
                callgraph.resize();
                callgraph.fit();
                callgraph.center();
            })
        });
    </script>
{% endblock %}